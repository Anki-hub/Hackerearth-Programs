#include<string.h>
#include<stdio.h>
int main(){
    
    char a[100];
    int len=0;
    scanf("%s", a);
    len=strlen(a);
    int Q, i=0;
    scanf("%d", &Q);
    
while(Q!=0){
 int l, r;
 scanf("%d %c", &l, &r);
 a[l-1]=r;
        Q--;
    }
    
    char b[len];
    for(i=0; i<len; i++)
    b[i]=a[i];
    
    int M;
    scanf("%d", &M);
while(M!=0){
 int l, r, j=0;
 char temp;
 
 scanf("%d %d", &l, &r);
 for(i=l-1, j=r-1; i<j; i++, j--){
     temp=b[i];
     b[i]=b[j];
     b[j]=temp;
    }
 M--;
}
b[len]='\0';
     int count=0;
 for(i=0; i<len; i++){
     if(a[i]==b[i])
     count++;
    }
printf("%s\n%s\n%d", a, b, count);
}
